{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "stream-brandkit-picker",
  "type": "registry:block",
  "description": "Stream team's comprehensive brandkit picker with all brandkit components",
  "dependencies": [
    "@sitecore/stream-ui-core",
    "@mdi/js"
  ],
  "registryDependencies": [
    "button",
    "popover",
    "input",
    "separator",
    "avatar"
  ],
  "files": [
    {
      "path": "registry/new-york/stream/blocks/stream-brandkit-picker/components/stream-brandkit-picker.tsx",
      "content": "\"use client\"\n\nimport React, { useEffect, useState } from \"react\"\nimport { mdiChevronDown } from \"@mdi/js\"\nimport { type Brandkit } from \"@sitecore/stream-ui-core\"\n\nimport { cn } from \"@/registry/new-york/lib/utils\"\nimport { Button } from \"@/registry/new-york/ui/button\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/registry/new-york/ui/popover\"\n\nimport { StreamIcon } from \"../../../ui/stream-icon\"\nimport { StreamBrandkitItem } from \"./stream-brandkit-item\"\nimport {\n  StreamBrandkitList,\n  StreamBrandkitListProps,\n} from \"./stream-brandkit-list\"\n\nexport interface StreamBrandkitPickerProps {\n  brandkits: Brandkit[]\n  recentBrandkit?: Brandkit\n  onSelect?: (brandkit: Brandkit) => void\n  onSearch?: (query: string) => Brandkit[]\n  loading?: boolean\n  placeholder?: string\n  className?: string\n  emptyStateMessage?: string\n  disabled?: boolean\n  testId?: string\n}\n\nexport function StreamBrandkitPicker({\n  brandkits,\n  recentBrandkit,\n  onSelect,\n  onSearch,\n  disabled,\n  loading,\n  placeholder = \"Search\",\n  className,\n  emptyStateMessage,\n  testId,\n}: StreamBrandkitPickerProps): React.ReactNode {\n  /* Hooks */\n  const [isOpen, setIsOpen] = useState(false)\n\n  const [selectedBrandkit, setSelectedBrandkit] = useState<Brandkit | null>()\n\n  /* Events */\n  const handleBrandkitOnSelect = (brandkit: Brandkit): void => {\n    setSelectedBrandkit(brandkit)\n    onSelect?.(brandkit)\n    setIsOpen(false)\n  }\n\n  useEffect(() => {\n    if (recentBrandkit) setSelectedBrandkit(recentBrandkit)\n  }, [recentBrandkit])\n\n  return (\n    <Popover\n      open={isOpen}\n      onOpenChange={(open: boolean | ((prevState: boolean) => boolean)) =>\n        setIsOpen(open)\n      }\n      data-testid={testId}\n    >\n      <PopoverTrigger asChild disabled={disabled}>\n        <div title={selectedBrandkit?.name || \"Select a brandkit\"}>\n          {selectedBrandkit?.id ? (\n            <StreamBrandkitItem\n              variant=\"outline\"\n              brandkit={selectedBrandkit}\n              className=\"max-w-[240px] rounded-full\"\n              onSelect={handleBrandkitOnSelect}\n              testId=\"stream-brandkit-picker\"\n            />\n          ) : (\n            <Button\n              variant=\"outline\"\n              className=\"text-md truncate rounded-full text-left font-normal\"\n            >\n              {loading\n                ? \"Loading brandkit...\"\n                : selectedBrandkit?.name || \"Select a brandkit\"}\n              <StreamIcon\n                path={mdiChevronDown}\n                className=\"neutral transition\"\n              />\n            </Button>\n          )}\n        </div>\n      </PopoverTrigger>\n      <PopoverContent\n        className={cn(className)}\n        align=\"start\"\n        side=\"bottom\"\n        sideOffset={2}\n        alignOffset={0}\n        avoidCollisions={false}\n      >\n        <StreamBrandkitList\n          brandkits={brandkits}\n          placeholder={placeholder}\n          recentBrandkit={recentBrandkit}\n          onSelect={handleBrandkitOnSelect}\n          onSearch={onSearch}\n          loading={loading}\n          emptyStateMessage={emptyStateMessage}\n        />\n      </PopoverContent>\n    </Popover>\n  )\n}\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/stream/blocks/stream-brandkit-picker/components/stream-brandkit-list.tsx",
      "content": "\"use client\"\n\nimport React, { useEffect, useState } from \"react\"\nimport { type Brandkit } from \"@sitecore/stream-ui-core\"\n\nimport { cn } from \"@/registry/new-york/lib/utils\"\nimport { Input } from \"@/registry/new-york/ui/input\"\nimport { Separator } from \"@/registry/new-york/ui/separator\"\n\nimport { StreamSpinner } from \"../../../ui/stream-spinner\"\nimport { StreamBrandkitItem } from \"./stream-brandkit-item\"\n\nexport interface StreamBrandkitListProps {\n  brandkits: Brandkit[]\n  recentBrandkit?: Brandkit\n  onSelect?: (brandkit: Brandkit) => void\n  onSearch?: (query: string) => Brandkit[]\n  loading?: boolean\n  placeholder?: string\n  className?: string\n  emptyStateMessage?: string\n  testId?: string\n}\n\nexport function StreamBrandkitList({\n  brandkits,\n  recentBrandkit,\n  onSelect,\n  onSearch,\n  loading,\n  placeholder = \"Search\",\n  className,\n  emptyStateMessage,\n  testId,\n}: StreamBrandkitListProps): React.ReactNode {\n  /* Hooks */\n  const [filteredBrandkits, setFilteredBrandkits] = useState<Brandkit[]>([])\n  const [searchQuery, setSearchQuery] = useState(\"\")\n\n  /* Events */\n  const handleBrandkitOnSelect = (brandkit: Brandkit): void => {\n    onSelect?.(brandkit)\n  }\n\n  const handleSearchOnChange = (query: string): void => {\n    setSearchQuery(query)\n    if (onSearch) {\n      setFilteredBrandkits(onSearch(query))\n      return\n    }\n    setFilteredBrandkits(\n      brandkits.filter((brandkit) =>\n        brandkit.name.toLowerCase().includes(query.toLowerCase())\n      )\n    )\n  }\n\n  useEffect(() => {\n    if (brandkits) setFilteredBrandkits(brandkits)\n  }, [brandkits])\n\n  return (\n    <section\n      className={cn(\"flex flex-col gap-2\", className)}\n      data-testid={testId}\n    >\n      <div className=\"flex flex-col gap-2\">\n        <span className=\"flex items-center gap-2 font-semibold\">\n          Recent Brand\n        </span>\n        {recentBrandkit && (\n          <StreamBrandkitItem\n            brandkit={recentBrandkit}\n            onSelect={handleBrandkitOnSelect}\n          />\n        )}\n        {loading && <div className=\"py-1\">Loading brandkit...</div>}\n        {recentBrandkit === undefined && !loading && (\n          <div className=\"py-1\">No recent brandkit</div>\n        )}\n        <Separator />\n        <span className=\"my-4 flex items-center gap-2 font-semibold\">\n          All Brands {loading && <StreamSpinner size={\"xs\"} />}\n        </span>\n        <Input\n          type=\"search\"\n          placeholder={placeholder}\n          className=\"rounded-lg\"\n          value={searchQuery}\n          onChange={(e: { target: { value: string } }) =>\n            handleSearchOnChange(e.target.value)\n          }\n        />\n      </div>\n      <div className=\"mt-2 flex max-h-96 min-h-48 flex-1 flex-col gap-1 overflow-y-auto\">\n        {filteredBrandkits?.map((brandkit: Brandkit) => (\n          <StreamBrandkitItem\n            key={brandkit.id}\n            brandkit={brandkit}\n            onSelect={handleBrandkitOnSelect}\n          />\n        ))}\n\n        {loading && (\n          <div className=\"grid flex-1 place-items-center\">\n            <div className=\"flex flex-col items-center gap-6\">\n              <StreamSpinner size=\"lg\" />\n              <span>Loading brandkits...</span>\n            </div>\n          </div>\n        )}\n\n        {!brandkits?.length && !loading && (\n          <div className=\"grid flex-1 place-items-center\">\n            <div className=\"flex flex-col items-center gap-6\">\n              <span>{emptyStateMessage || \"No brandkits found\"}</span>\n            </div>\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/stream/blocks/stream-brandkit-picker/components/stream-brandkit-item.tsx",
      "content": "\"use client\"\n\nimport React from \"react\"\nimport { type Brandkit } from \"@sitecore/stream-ui-core\"\n\nimport { cn } from \"@/registry/new-york/lib/utils\"\nimport { useGetDocumentProxyUrl } from \"@/registry/new-york/stream/blocks/chat/hooks/useGetDocumentProxyUrl\"\nimport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n} from \"@/registry/new-york/ui/avatar\"\nimport { Button } from \"@/registry/new-york/ui/button\"\n\nexport interface StreamBrandkitItemProps {\n  brandkit: Brandkit\n  onSelect?: (brandkit: Brandkit) => void\n  testId?: string\n  variant?: \"link\" | \"default\" | \"ghost\" | \"outline\" | null | undefined\n  className?: string\n  showAvatar?: boolean\n  children?: React.ReactNode\n}\n\nexport function StreamBrandkitItem({\n  brandkit,\n  onSelect,\n  testId,\n  className,\n  variant = \"ghost\",\n  showAvatar = true,\n  children,\n}: StreamBrandkitItemProps): React.ReactNode {\n  /* Hooks */\n  const getDocumentProxyUrl = useGetDocumentProxyUrl()\n\n  /* Events */\n  const handleBrandkitOnSelect = (brandkit: Brandkit): void => {\n    onSelect?.(brandkit)\n  }\n\n  return (\n    <Button\n      data-testid={testId}\n      variant={variant}\n      className={cn(\n        \"flex items-center justify-start rounded-md px-1 py-4\",\n        className\n      )}\n      onClick={() => handleBrandkitOnSelect(brandkit)}\n      title={brandkit.name}\n    >\n      {showAvatar && (\n        <Avatar className=\"h-9 w-9 border-2\">\n          <AvatarImage\n            className=\"object-contain\"\n            src={getDocumentProxyUrl(brandkit?.logo)}\n            alt={brandkit?.name}\n          />\n          <AvatarFallback className=\"flex h-full w-full items-center justify-center font-bold text-gray-500\">\n            {brandkit?.name.charAt(0).toUpperCase()}\n          </AvatarFallback>\n        </Avatar>\n      )}\n      <span className=\"overflow-hidden overflow-ellipsis whitespace-nowrap\">\n        {brandkit?.name}\n      </span>\n      {children}\n    </Button>\n  )\n}\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/stream/blocks/stream-brandkit-picker/page.tsx",
      "content": "import { createBrandkit } from \"@sitecore/stream-ui-core\"\n\nimport { StreamBrandkitPicker } from \"./components/stream-brandkit-picker\"\n\nconst mockBrandkits = [\n  createBrandkit({\n    id: \"1\",\n    organizationId: \"org-1\",\n    name: \"Sitecore Brand\",\n    logo: \"https://mms-delivery.sitecore.com/1234567890/logo.png\",\n    description: \"Official Sitecore brand guidelines\",\n    tags: [{ category: \"technology\", values: [\"technology\", \"enterprise\"] }],\n  }),\n  createBrandkit({\n    id: \"2\",\n    organizationId: \"org-1\",\n    name: \"Marketing Campaign\",\n    logo: \"https://mms-delivery.sitecore.com/0987654321/campaign.png\",\n    description: \"Q1 Marketing campaign assets\",\n    tags: [{ category: \"marketing\", values: [\"marketing\", \"campaign\"] }],\n  }),\n  createBrandkit({\n    id: \"3\",\n    organizationId: \"org-1\",\n    name: \"Product Launch\",\n    logo: \"https://mms-delivery.sitecore.com/1122334455/product.png\",\n    description: \"New product launch materials\",\n    tags: [{ category: \"product\", values: [\"product\", \"launch\"] }],\n  }),\n]\n\nconst mockRecentBrandkit = createBrandkit({\n  id: \"1\",\n  organizationId: \"org-1\",\n  name: \"Sitecore Brand\",\n  logo: \"https://mms-delivery.sitecore.com/1234567890/logo.png\",\n  description: \"Official Sitecore brand guidelines\",\n  tags: [{ category: \"technology\", values: [\"technology\", \"enterprise\"] }],\n})\n\nexport default function StreamBrandkitPickerPage() {\n  return (\n    <div className=\"container mx-auto space-y-6 p-6\">\n      <div className=\"space-y-2\">\n        <h1 className=\"text-2xl font-bold\">Stream Brandkit Picker</h1>\n        <p className=\"text-muted-foreground\">\n          A dropdown picker for selecting brandkits with search functionality\n        </p>\n      </div>\n\n      <div className=\"space-y-4\">\n        <div className=\"space-y-2\">\n          <h2 className=\"text-lg font-semibold\">Default State</h2>\n          <StreamBrandkitPicker\n            brandkits={mockBrandkits}\n            recentBrandkit={mockRecentBrandkit}\n            onSelect={(brandkit) => console.log(\"Selected:\", brandkit)}\n            loading={false}\n            placeholder=\"Search brandkits...\"\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <h2 className=\"text-lg font-semibold\">Loading State</h2>\n          <StreamBrandkitPicker\n            brandkits={[]}\n            loading={true}\n            onSelect={(brandkit) => console.log(\"Selected:\", brandkit)}\n            placeholder=\"Search brandkits...\"\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <h2 className=\"text-lg font-semibold\">Empty State</h2>\n          <StreamBrandkitPicker\n            brandkits={[]}\n            loading={false}\n            onSelect={(brandkit) => console.log(\"Selected:\", brandkit)}\n            placeholder=\"Search brandkits...\"\n            emptyStateMessage=\"No brandkits available\"\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <h2 className=\"text-lg font-semibold\">Disabled State</h2>\n          <StreamBrandkitPicker\n            brandkits={mockBrandkits}\n            recentBrandkit={mockRecentBrandkit}\n            onSelect={(brandkit) => console.log(\"Selected:\", brandkit)}\n            loading={false}\n            disabled={true}\n            placeholder=\"Search brandkits...\"\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:page",
      "target": "app/blocks/stream-brandkit-picker/page.tsx"
    }
  ],
  "categories": [
    "stream",
    "ui",
    "brandkit",
    "picker"
  ]
}